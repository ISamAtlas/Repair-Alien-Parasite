[gd_scene format=3 uid="uid://dlmbyfn0jxty3"]

[ext_resource type="Script" uid="uid://ck8x2kfiejr1f" path="res://scripts/characters/player.gd" id="1_rp718"]
[ext_resource type="Texture2D" uid="uid://d0myhcci4ejim" path="res://assets/characters/parasite_legs.png" id="2_t61fv"]
[ext_resource type="Script" uid="uid://bqiis0cj721ms" path="res://scripts/characters/procedural_legs.gd" id="3_686vu"]
[ext_resource type="Texture2D" uid="uid://dwvojn83w2mxy" path="res://assets/characters/parasite_body.png" id="4_hss88"]
[ext_resource type="Texture2D" uid="uid://cbc6qthyx6suc" path="res://assets/characters/parasite_body_bare.png" id="5_6avc5"]
[ext_resource type="Texture2D" uid="uid://b348e7u1trojk" path="res://assets/characters/parasite_body_shadings.png" id="6_mk55u"]
[ext_resource type="Script" uid="uid://bjredijeqwhbq" path="res://scripts/characters/hammer.gd" id="7_xuses"]
[ext_resource type="Texture2D" uid="uid://cbw3tqgdcbybj" path="res://assets/tools/hammer.png" id="8_42irl"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_76oj4"]
size = Vector2(29, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_mk55u"]
atlas = ExtResource("2_t61fv")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_xuses"]
atlas = ExtResource("2_t61fv")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_42irl"]
atlas = ExtResource("2_t61fv")
region = Rect2(64, 32, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_3xnwo"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mk55u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xuses")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_42irl")
}],
"loop": true,
"name": &"default",
"speed": 2.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_t61fv"]
atlas = ExtResource("2_t61fv")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_686vu"]
atlas = ExtResource("2_t61fv")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hss88"]
atlas = ExtResource("2_t61fv")
region = Rect2(64, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_6avc5"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_t61fv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_686vu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hss88")
}],
"loop": true,
"name": &"default",
"speed": 2.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_djydg"]
atlas = ExtResource("2_t61fv")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_bsn6e"]
atlas = ExtResource("2_t61fv")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_blysn"]
atlas = ExtResource("2_t61fv")
region = Rect2(64, 64, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_qd3e3"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_djydg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bsn6e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_blysn")
}],
"loop": true,
"name": &"default",
"speed": 2.0
}]

[sub_resource type="SkeletonModification2DCCDIK" id="SkeletonModification2DCCDIK_t61fv"]
target_nodepath = NodePath("../../IK Targets/leftLeg")
tip_nodepath = NodePath("left leg/shin/foot")
ccdik_data_chain_length = 2
joint_data/0/bone_index = 0
joint_data/0/bone2d_node = NodePath("left leg")
joint_data/0/rotate_from_joint = false
joint_data/0/enable_constraint = true
joint_data/0/constraint_angle_min = 15.0
joint_data/0/constraint_angle_max = -15.0
joint_data/0/constraint_angle_invert = true
joint_data/0/constraint_in_localspace = true
joint_data/0/editor_draw_gizmo = true
joint_data/1/bone_index = 1
joint_data/1/bone2d_node = NodePath("left leg/shin")
joint_data/1/rotate_from_joint = false
joint_data/1/enable_constraint = true
joint_data/1/constraint_angle_min = 45.0
joint_data/1/constraint_angle_max = -45.0
joint_data/1/constraint_angle_invert = true
joint_data/1/constraint_in_localspace = true
joint_data/1/editor_draw_gizmo = true

[sub_resource type="SkeletonModification2DCCDIK" id="SkeletonModification2DCCDIK_686vu"]
target_nodepath = NodePath("../../IK Targets/rightLeg")
tip_nodepath = NodePath("right leg/shin/foot")
ccdik_data_chain_length = 2
joint_data/0/bone_index = 3
joint_data/0/bone2d_node = NodePath("right leg")
joint_data/0/rotate_from_joint = false
joint_data/0/enable_constraint = true
joint_data/0/constraint_angle_min = 15.0
joint_data/0/constraint_angle_max = -15.0
joint_data/0/constraint_angle_invert = true
joint_data/0/constraint_in_localspace = true
joint_data/0/editor_draw_gizmo = true
joint_data/1/bone_index = 4
joint_data/1/bone2d_node = NodePath("right leg/shin")
joint_data/1/rotate_from_joint = false
joint_data/1/enable_constraint = true
joint_data/1/constraint_angle_min = 45.0
joint_data/1/constraint_angle_max = -45.0
joint_data/1/constraint_angle_invert = true
joint_data/1/constraint_in_localspace = true
joint_data/1/editor_draw_gizmo = true

[sub_resource type="SkeletonModificationStack2D" id="SkeletonModificationStack2D_686vu"]
enabled = true
modification_count = 2
modifications/0 = SubResource("SkeletonModification2DCCDIK_t61fv")
modifications/1 = SubResource("SkeletonModification2DCCDIK_686vu")

[sub_resource type="AtlasTexture" id="AtlasTexture_3xnwo"]
atlas = ExtResource("4_hss88")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hv5x3"]
atlas = ExtResource("4_hss88")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ykrpk"]
atlas = ExtResource("4_hss88")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_i1nod"]
atlas = ExtResource("4_hss88")
region = Rect2(96, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_ykrpk"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_3xnwo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hv5x3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ykrpk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i1nod")
}],
"loop": true,
"name": &"default",
"speed": 2.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_uudf8"]
size = Vector2(56.000004, 10.416672)

[sub_resource type="AtlasTexture" id="AtlasTexture_4kqyw"]
atlas = ExtResource("5_6avc5")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_svuau"]
atlas = ExtResource("5_6avc5")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ro20i"]
atlas = ExtResource("5_6avc5")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_8y75b"]
atlas = ExtResource("5_6avc5")
region = Rect2(96, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_tebod"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4kqyw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_svuau")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ro20i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8y75b")
}],
"loop": true,
"name": &"default",
"speed": 2.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_6nfx3"]
atlas = ExtResource("6_mk55u")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3hnlq"]
atlas = ExtResource("6_mk55u")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_d73qs"]
atlas = ExtResource("6_mk55u")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_u6wme"]
atlas = ExtResource("6_mk55u")
region = Rect2(96, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_bxwvg"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_6nfx3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3hnlq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d73qs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u6wme")
}],
"loop": true,
"name": &"default",
"speed": 2.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xuses"]
size = Vector2(96, 117)

[node name="Player" type="CharacterBody2D" unique_id=623290912]
collision_mask = 2
script = ExtResource("1_rp718")
tool = 1

[node name="CollisionShape2D2" type="CollisionShape2D" parent="." unique_id=977015601]
position = Vector2(-5.5, 4)
shape = SubResource("RectangleShape2D_76oj4")

[node name="Camera2D" type="Camera2D" parent="." unique_id=905640174]
position = Vector2(0, -39)
zoom = Vector2(1.5, 1.5)

[node name="body" type="Node2D" parent="." unique_id=802094910]

[node name="legs" type="Node2D" parent="body" unique_id=1542073166]

[node name="left leg" type="Node2D" parent="body/legs" unique_id=1403927414]

[node name="shin" type="AnimatedSprite2D" parent="body/legs/left leg" unique_id=370476575]
position = Vector2(-15.98505, -29.149563)
rotation = 0.16222113
scale = Vector2(1.9998355, 1.9998355)
sprite_frames = SubResource("SpriteFrames_3xnwo")
autoplay = "default"
offset = Vector2(0.5, 0)

[node name="thigh" type="AnimatedSprite2D" parent="body/legs/left leg" unique_id=613335362]
position = Vector2(-13, -59)
rotation = 0.09966245
scale = Vector2(1.999988, 1.999988)
sprite_frames = SubResource("SpriteFrames_6avc5")
autoplay = "default"
offset = Vector2(-0.5, -4)

[node name="foot" type="AnimatedSprite2D" parent="body/legs/left leg" unique_id=2050677461]
position = Vector2(-19.073418, 1.7341137)
rotation = 0.004717354
scale = Vector2(1.9998355, 1.9998355)
sprite_frames = SubResource("SpriteFrames_qd3e3")
autoplay = "default"
offset = Vector2(1, -10)

[node name="right leg" type="Node2D" parent="body/legs" unique_id=896004102]
position = Vector2(7.5, 0)

[node name="shin" type="AnimatedSprite2D" parent="body/legs/right leg" unique_id=1217307789]
position = Vector2(-0.0559268, -32.035522)
rotation = 0.014397003
scale = Vector2(1.999826, 1.999826)
sprite_frames = SubResource("SpriteFrames_3xnwo")
autoplay = "default"
offset = Vector2(0.5, 0)

[node name="thigh" type="AnimatedSprite2D" parent="body/legs/right leg" unique_id=1032813898]
position = Vector2(-1.5, -62)
rotation = -0.04815895
scale = Vector2(1.9999901, 1.9999901)
sprite_frames = SubResource("SpriteFrames_6avc5")
autoplay = "default"
offset = Vector2(-0.5, -4)

[node name="foot" type="AnimatedSprite2D" parent="body/legs/right leg" unique_id=1688032002]
position = Vector2(1.4381237, -1.0339413)
rotation = 0.004717336
scale = Vector2(1.999826, 1.999826)
sprite_frames = SubResource("SpriteFrames_qd3e3")
autoplay = "default"
offset = Vector2(1, -10)

[node name="bones" type="Node2D" parent="body" unique_id=267283501]
scale = Vector2(2, 2)

[node name="Skeleton2D" type="Skeleton2D" parent="body/bones" unique_id=764974705]
modification_stack = SubResource("SkeletonModificationStack2D_686vu")

[node name="left leg" type="Bone2D" parent="body/bones/Skeleton2D" unique_id=1006087297]
position = Vector2(-6.5, -29.5)
rotation = 0.099671625
scale = Vector2(0.9999984, 0.9999984)
rest = Transform2D(1, 0, 0, 1, -15, -24)
metadata/_local_pose_override_enabled_ = true

[node name="shin" type="Bone2D" parent="body/bones/Skeleton2D/left leg" unique_id=1799537869]
position = Vector2(-8.201599e-05, 14.999698)
rotation = 0.029406665
scale = Vector2(0.9999144, 0.9999144)
rest = Transform2D(1, 0, 0, 1, 0.5, 14)
metadata/_local_pose_override_enabled_ = true

[node name="foot" type="Bone2D" parent="body/bones/Skeleton2D/left leg/shin" unique_id=768025417]
position = Vector2(0.97018945, 15.489778)
rest = Transform2D(1, 0, 0, 1, 0.5, 12)
auto_calculate_length_and_angle = false
length = 5.0
bone_angle = 90.0

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="body/bones/Skeleton2D/left leg/shin/foot" unique_id=290798528]
remote_path = NodePath("../../../../../../legs/left leg/foot")
update_rotation = false

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="body/bones/Skeleton2D/left leg/shin" unique_id=1313068666]
remote_path = NodePath("../../../../../legs/left leg/shin")

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="body/bones/Skeleton2D/left leg" unique_id=1685329190]
remote_path = NodePath("../../../../legs/left leg/thigh")

[node name="right leg" type="Bone2D" parent="body/bones/Skeleton2D" unique_id=882230098]
position = Vector2(3, -31)
rotation = -0.059457127
scale = Vector2(0.99999505, 0.99999505)
rest = Transform2D(1, 0, 0, 1, -15, -24)
metadata/_local_pose_override_enabled_ = true

[node name="shin" type="Bone2D" parent="body/bones/Skeleton2D/right leg" unique_id=804502265]
position = Vector2(-5.054474e-05, 14.999714)
rotation = 0.06255619
scale = Vector2(0.9999179, 0.9999179)
rest = Transform2D(1, 0, 0, 1, 0.5, 14)
metadata/_local_pose_override_enabled_ = true

[node name="foot" type="Bone2D" parent="body/bones/Skeleton2D/right leg/shin" unique_id=1189231629]
position = Vector2(0.97018945, 15.489778)
rest = Transform2D(1, 0, 0, 1, 0.5, 12)
auto_calculate_length_and_angle = false
length = 5.0
bone_angle = 90.0

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="body/bones/Skeleton2D/right leg/shin/foot" unique_id=266476063]
remote_path = NodePath("../../../../../../legs/right leg/foot")
update_rotation = false

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="body/bones/Skeleton2D/right leg/shin" unique_id=1305799774]
remote_path = NodePath("../../../../../legs/right leg/shin")

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="body/bones/Skeleton2D/right leg" unique_id=2080665345]
remote_path = NodePath("../../../../legs/right leg/thigh")

[node name="IK Targets" type="Node2D" parent="body" unique_id=1240140754]

[node name="leftLeg" type="Marker2D" parent="body/IK Targets" unique_id=51235654]
position = Vector2(-21, 21)

[node name="rightLeg" type="Marker2D" parent="body/IK Targets" unique_id=1230936876]
position = Vector2(10, 21)

[node name="IK Base" type="Node2D" parent="body" unique_id=1244359582]

[node name="leftLeg" type="Marker2D" parent="body/IK Base" unique_id=691987968 node_paths=PackedStringArray("target")]
position = Vector2(-21, 21)
script = ExtResource("3_686vu")
target = NodePath("../../IK Targets/leftLeg")
distance_threshold = 50
range = 150
walk_index = -1

[node name="rightLeg" type="Marker2D" parent="body/IK Base" unique_id=1934047439 node_paths=PackedStringArray("target")]
position = Vector2(10, 20.999996)
script = ExtResource("3_686vu")
target = NodePath("../../IK Targets/rightLeg")
distance_threshold = 50
range = 150
walk_index = 1

[node name="ParasiteBody" type="AnimatedSprite2D" parent="." unique_id=130711354]
position = Vector2(-5, -68)
scale = Vector2(1.9998367, 1.9998367)
sprite_frames = SubResource("SpriteFrames_ykrpk")
autoplay = "default"
frame = 1
frame_progress = 0.33215007

[node name="Hammer" type="Node2D" parent="." unique_id=502069976]
position = Vector2(-4, -60)
script = ExtResource("7_xuses")

[node name="Hammer" type="Sprite2D" parent="Hammer" unique_id=2118611704]
position = Vector2(0, -102.666664)
scale = Vector2(2, 2)
texture = ExtResource("8_42irl")
offset = Vector2(0, 22)

[node name="HammerHead" type="CollisionShape2D" parent="." unique_id=129397487]
position = Vector2(-5.3333335, -162.66666)
shape = SubResource("RectangleShape2D_uudf8")

[node name="EmptyBody" type="AnimatedSprite2D" parent="." unique_id=1235849355]
modulate = Color(1, 1, 1, 0.5372549)
position = Vector2(-5, -68)
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_tebod")
autoplay = "default"
frame = 2
frame_progress = 0.70306474

[node name="BodyShading" type="AnimatedSprite2D" parent="." unique_id=842116051]
position = Vector2(-5, -68)
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_bxwvg")
autoplay = "default"
frame = 3
frame_progress = 0.21738254

[node name="walk_cycle" type="Timer" parent="." unique_id=1584367786]
wait_time = 0.2
autostart = true

[node name="battery_place" type="Area2D" parent="." unique_id=761690813]
collision_layer = 0
collision_mask = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="battery_place" unique_id=510908832]
position = Vector2(-3, -43)
shape = SubResource("RectangleShape2D_xuses")

[connection signal="timeout" from="walk_cycle" to="." method="_on_walk_cycle_timeout"]
[connection signal="area_entered" from="battery_place" to="." method="_on_battery_place_area_entered"]
[connection signal="area_exited" from="battery_place" to="." method="_on_battery_place_area_exited"]
